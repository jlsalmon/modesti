<style>
  /* TODO: move this to the proper place */
  .request-header {
    width: 100%;
  }

  .request-header .request-id {
    display: inline-block;
    padding: 0;
    vertical-align: middle;
    margin-top: 8px;
  }

  .request-header .request-description {
    display: inline-block;
    vertical-align: middle;
    margin-left: 5px;
    color: #777;
  }

  .editable-hide {
    display: none;
  }

  .editable-error {
    color: #a94442;
    padding-left: 5px;
    display: inline-block;
    font: normal normal normal 14px/1 FontAwesome;
    font-size: 14px;
    vertical-align: sub;
  }

  .editable-error:before {
    /* fa-exclamation-triangle */
    content:"\f071"
  }

  .editable-input {
    border-radius: 0px !important;
    box-shadow: none;
    display: inline-block;
    width: 310px;
    height: 1.8em;
    line-height: 1.42857;
    color: #555;
    background-color: #f5f5f5;
    background-image: none;
    border-bottom: 1px solid #ccc;
    border-top: none;
    border-left: none;
    border-right: none;
  }

  .editable-input:focus {
    box-shadow: none;
    outline: none;
  }

</style>

<div class="row">
  <div class="col-lg-12">

    <div class="pull-left">
      <h4 class="request-id">
        <i class="fa fa-list-ol fa-fw text-muted"></i>
        requests <span class="text-muted">/</span> {{::$ctrl.request.requestId}}
      </h4>
      <div class="request-description">
        <span editable-text="$ctrl.request.description"
              e-form="editableDescription"
              buttons="no"
              blur="submit"
              ng-click="editableDescription.$show()"
              ng-mouseenter="$ctrl.hover = true"
              ng-mouseleave="$ctrl.hover = false"
              onbeforesave="$ctrl.validateDescription($data)"
              onaftersave="$ctrl.saveRequest($data)">
          {{$ctrl.request.description}}

          <i class="fa fa-pencil"
             ng-click="editableDescription.$show()"
             ng-show="$ctrl.hover && !editableDescription.$visible"></i>
        </span>
      </div>
    </div>

    <div class="pull-right">

      <!-- Request creator -->
      <span class="request-detail-item text-muted"
            uib-tooltip="Creator"
            tooltip-append-to-body="true"
            tooltip-placement="bottom">
        <i class="fa fa-fw fa-user-md"></i>
        <a ui-sref="user({ id: $ctrl.request.creator })">{{::$ctrl.request.creator}}</a>
      </span>


      <!-- Request domain -->
      <span class="request-detail-item text-muted"
            uib-tooltip="Domain"
            tooltip-append-to-body="true"
            tooltip-placement="bottom">
        <i class="fa fa-fw fa-crosshairs"></i>
        {{::$ctrl.request.domain}}
      </span>


      <!-- If this is a child request, reference its parent -->
      <span class="request-detail-item"
            ng-if="$ctrl.request.parentRequestId">
         parent: <a href="requests/{{$ctrl.request.parentRequestId}}">{{::$ctrl.request.parentRequestId}}</a>
      </span>


      <!-- If this is a parent request, list its children -->
      <span class="request-detail-item"
            ng-if="$ctrl.children.length > 0">
         children:
        <span ng-repeat="child in $ctrl.children">
          <a href="requests/{{child.requestId}}">{{::child.requestId}}</a>
        </span>
      </span>


      <!-- Request type -->
      <span class="request-detail-item text-muted"
            uib-tooltip="Request Type"
            tooltip-append-to-body="true"
            tooltip-placement="bottom">

        <span class="badge request-type" ng-class="'{{::$ctrl.request.type}}'">
          {{$ctrl.request.type | uppercase}}
        </span>
      </span>


      <!-- Request status -->
      <span class="request-detail-item"
            uib-tooltip="Status"
            tooltip-append-to-body="true"
            tooltip-placement="bottom">
        <span class="label request-status" ng-class="'{{::$ctrl.request.status}}'">
          {{::$ctrl.request.status.split("_").join(" ")}}
        </span>
      </span>

    </div>

  </div>
</div>

