<style>
  .content-header > .request-title {
    padding-left: 5px;
  }

  .content-header > .request-title > .request-details {
    margin-top:10px;
  }

  .content-header > .request-title > .request-details > .request-detail-item {
    margin-left:10px;
  }

  .content-header > .request-title h1 {
    margin: 0;
  }

  .content-header > .request-icon h1 {
    margin: 0;
  }

  div.details {
    width: 100%;
    display: table;
    content: " ";
    clear: both;
    margin-bottom: 20px;
  }

  div.details div.details-header {
    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAADCAYAAABS3WWCAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NEQ5RDgxQzc2RjQ5MTFFMjhEMUNENzFGRUMwRjhBRTciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NEQ5RDgxQzg2RjQ5MTFFMjhEMUNENzFGRUMwRjhBRTciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0RDlEODFDNTZGNDkxMUUyOEQxQ0Q3MUZFQzBGOEFFNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0RDlEODFDNjZGNDkxMUUyOEQxQ0Q3MUZFQzBGOEFFNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvXFWFAAAAAYSURBVHjaYvj//z8D0/Pnz/8zgFgAAQYAS5UJscReGMIAAAAASUVORK5CYII=) repeat-x scroll 0 17px;
  }

  div.details div.details-header > h5 {
    background-color: #fff;
    display: inline-block;
    padding-right: 5px;
    font-weight: bold;
  }

  div.details div.property-list > span {
    margin-top: 1px;
  }

  .pagination > li > a {
    background: #fafafa;
    color: #666;
  }

  .pagination > .active > a,
  .pagination > .active > span,
  .pagination > .active > a:hover,
  .pagination > .active > span:hover,
  .pagination > .active > a:focus,
  .pagination > .active > span:focus {
    color: #333;
    background-color: #E6E6E6;
    border-color: #ADADAD;
    box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
  }
</style>

<!-- Content Header (Page header) -->
<section id="request-header" class="content-header">
<!--   <h1>
    <i class="fa fa-list-ol fa-fw text-muted" style="vertical-align: middle;"></i>
    requests <span class="text-muted">/</span> {{ctrl.request.requestId}} <small>{{ctrl.request.description}}</small>
  </h1> -->

  <div class="request-icon">
  <h1>
    <i class="fa fa-list-ol fa-fw text-muted" style="vertical-align: middle;"></i>
    </h1>
  </div>
  <div class="request-title">
    <h1>
      requests <span class="text-muted">/</span> {{::ctrl.request.requestId}} <small>{{::ctrl.request.description}}</small>
    </h1>

    <div class="request-details">
      <span class="label request-status" ng-class="'{{::ctrl.request.status}}'">{{::ctrl.request.status.replace('_', ' ')}}</span>
      <!-- <span class="text-muted">
        {{ctrl.request.type | uppercase}}
      </span> -->
      <span class="request-detail-item text-muted">
        <i class="fa fa-fw fa-sitemap"></i>
        {{::ctrl.request.subsystem.name}}
      </span>
      <span class="request-detail-item text-muted">
        <i class="fa fa-fw fa-crosshairs"></i>
        {{::ctrl.request.domain}}
      </span>
      <span class="request-detail-item text-muted">
        <i class="fa fa-fw fa-cogs"></i>
        {{::ctrl.request.categories.join(', ')}}
      </span>
      <span class="request-detail-item text-muted">
        <i class="fa fa-fw fa-user"></i>
        {{::ctrl.request.creator}}
      </span>
    </div>
  </div>

  <div id="request-main-nav">
    <tabset justified="false">
      <tab ng-click="ctrl.activateTab(0)">
        <tab-heading> <i class="fa fa-edit"></i>Edit</tab-heading>
      </tab>
      <tab ng-click="ctrl.activateTab(1)">
        <tab-heading> <i class="fa fa-exclamation-triangle"></i>Error report</tab-heading>
      </tab>
      <tab ng-click="ctrl.activateTab(2)">
        <tab-heading> <i class="fa fa-heartbeat"></i>Activity</tab-heading>
      </tab>
      <tab ng-click="ctrl.activateTab(3)">
        <tab-heading><i class="fa fa-comments"></i>Comments</tab-heading>
      </tab>
    </tabset>
  </div>

</section>

<!-- Main content -->
<section class="content">

  <div class="row">
    <div class="col-lg-12">

      <!-- Request editing page -->
      <div ng-show="ctrl.currentActiveTab == 0">


        <!-- If this is a parent request, list its children -->
        <div class="details" ng-if="ctrl.children.length > 0">
          children:
          <div ng-repeat="child in ctrl.children">
            <a href="#/requests/{{child.requestId}}">{{::child.requestId}}</a> {{::child.status}}
          </div>
        </div>


        <!-- If this is a child request, reference its parent -->
        <div class="details" ng-if="ctrl.request.parentRequestId">
          parent: <a href="#/requests/{{ctrl.request.parentRequestId}}">{{::ctrl.request.parentRequestId}}</a>
          </div>
        </div>


        <!--
          This is the main table directive.
        -->
        <modesti-table request="ctrl.request" schema="ctrl.schema" tasks="ctrl.tasks">

          <!-- Show appropriate controls based on the request status -->
          <div ng-switch="ctrl.request.status">
            <div ng-switch-when="IN_PROGRESS">
              <request-creation-controls />
            </div>
            <div ng-switch-when="FOR_CORRECTION">
              <request-creation-controls />
            </div>
            <div ng-switch-when="FOR_APPROVAL">
              <alarm-approval-controls />
            </div>
            <div ng-switch-when="FOR_TESTING">
              <point-testing-controls />
            </div>
          </div>
        </modesti-table>


      </div>

      <!-- Request error report page -->
      <div ng-show="ctrl.currentActiveTab == 1">
        <div ng-include src="'components/request/error-report.html'"></div>
      </div>

      <!-- Request activity page -->
      <div ng-show="ctrl.currentActiveTab == 2">
        <div ng-include src="'components/request/activity.html'"></div>
      </div>

      <!-- Request comments page -->
      <div ng-show="ctrl.currentActiveTab == 3">
        <div ng-include src="'components/request/comments.html'"></div>
      </div>
    </div>
  </div>

</section>
<!-- /.content -->