<div class="row">

  <div class="col-md-4">
    <span class="label pull-left"
          ng-class="ctrl.parent.hasErrors() > 0 ? 'bg-red' : 'bg-gray'"
          tooltip="{{ctrl.parent.getTotalErrors()}} problems(s) found. Click to view details."
          tooltip-placement="right">
      <i class="fa fa-fw fa-exclamation-circle"></i> {{ctrl.parent.getTotalErrors()}}
    </span>
  </div>

  <div class="col-md-4 pull-right">

    <!-- Request is assigned to us -->
    <div ng-if="ctrl.parent.canEdit()" class="pull-right">
      <div class="btn-group">
        <!-- Button to split the request -->
        <button class="btn btn-danger"
                ng-click="ctrl.split($event)"
                ng-disabled="!ctrl.parent.canSplit()"
                tooltip-append-to-body="true"
                tooltip="{{'SPLIT_SELECTED'|translate}}">

          <!--Show icon based on the loading state-->
          <i class="fa fa-fw fa-code-fork"            ng-show="ctrl.splitting == undefined"></i>
          <i class="fa fa-fw fa-spin fa-cog"          ng-show="ctrl.splitting == 'started'"></i>
          <i class="fa fa-fw fa-code-fork"            ng-show="ctrl.splitting == 'success'"></i>
          <i class="fa fa-fw fa-exclamation-triangle" ng-show="ctrl.splitting == 'error'"></i>
        </button>
      </div>

      <div class="btn-group">
        <!--Button to validate the request-->
        <button class="btn btn-success"
                ng-click="ctrl.parent.validate($event)"
                ng-disabled="!ctrl.parent.canValidate()"
                tooltip-append-to-body="true"
                tooltip="{{'VALIDATE_REQUEST'|translate}}">

          <!--Show icon based on the loading state-->
          <i class="fa fa-fw fa-check-square-o"       ng-show="ctrl.parent.validating == undefined"></i>
          <i class="fa fa-fw fa-spin fa-cog"          ng-show="ctrl.parent.validating == 'started'"></i>
          <i class="fa fa-fw fa-check-square-o"       ng-show="ctrl.parent.validating == 'success'"></i>
          <i class="fa fa-fw fa-exclamation-triangle" ng-show="ctrl.parent.validating == 'error'"></i>
          {{'VALIDATE'|translate}}
        </button>
      </div>

      <div class="btn-group">
        <!-- Button to submit the request -->
        <button class="btn btn-primary"
                ng-click="ctrl.submit($event)"
                ng-disabled="!ctrl.parent.canSubmit()"
                tooltip-append-to-body="true"
                tooltip="{{'SUBMIT_REQUEST'|translate}}">

          <!--Show icon based on the loading state-->
          <i class="fa fa-fw fa-external-link"        ng-show="ctrl.parent.submitting == undefined"></i>
          <i class="fa fa-fw fa-spin fa-cog"          ng-show="ctrl.parent.submitting == 'started'"></i>
          <i class="fa fa-fw fa-external-link"        ng-show="ctrl.parent.submitting == 'success'"></i>
          <i class="fa fa-fw fa-exclamation-triangle" ng-show="ctrl.parent.submitting == 'error'"></i>
          {{'SUBMIT'|translate}}
        </button>
      </div>
    </div>

    <!-- Request is assigned to someone else -->
    <div ng-if="!ctrl.parent.isCurrentUserAssigned()"  class="pull-right">
      <div>Request assigned to: <a href="users/{{ctrl.parent.getAssignee()}}" ng-click="$event.stopPropagation();">{{ctrl.parent.getAssignee()}}</a></div>
    </div>

  </div>
</div>

